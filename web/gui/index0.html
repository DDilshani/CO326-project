<!DOCTYPE html>
<html>
<head>
   <link rel="stylesheet" href="w3.css">
   <script src="jquery-1.9.0.min.js"></script>
   <script  type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.8/p5.min.js"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.8/addons/p5.dom.js"></script>

   <script type="text/javascript">
   var socket = new WebSocket("ws://localhost:8081");

   function setup() {
      socket.onopen = openSocket;
      socket.onmessage = showData;
   }

   function openSocket() {
      $("#input").prepend("Socket open<br>");
      updateTime();
   }

   function showData(result) {
      $("#input").prepend(result.data + "\n");
      updateTime();
   }
   function updateTime(){
      var today = new Date();
      var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
      $("#timeUpd").html(time);
   }
   $(document).ready(function(){
      $("#send").keypress(function (e) {
         if (e.which == 13) {
            var txt = $(this).val();
            $("#output").append(txt + "\n");
            socket.send(txt + "\n");
         }
      });

      $("#btnClear").click(function(){
         $("#input").html("");
         $("#output").html("");
      });
   });

   </script>
</head>
<body>

   <div class="w3-container w3-header w3-blue">
      <h3>Websocket Serial Monitor <small> (Updated on <span id="timeUpd"></span>)</small></h3>
   </div>
   <br>

   <div class="w3-container w3-hide">
      <div class="w3-row">
         <div class="w3-col s12 m5 l3">
            <button class="w3-button w3-blue">Scan</button>
            <button class="w3-button w3-blue">Connect</button>
         </div>

         <div class="w3-col s12 m7 l9">
            <select class="w3-select" name="option">
               <option value="" disabled selected>Choose your option</option>
               <option value="1">Robot 1</option>
               <option value="2">Robot 2</option>
               <option value="3">Robot 3</option>
            </select>
         </div>
      </div>
   </div>

   <div class="w3-container">
      <div class="w3-row">
      </div>
   </div>

   <div class="w3-container">
      <div class="w3-row" >

         <div class="w3-col s12 m6 l6" style="padding:0px 5px 5px 5px !important">
            <div class=" w3-card-4">
               <header class="w3-container w3-blue">
                  Receive
               </header>

               <div class="w3-container w3-padding-12">
                  <button class="w3-button w3-black w3-right" id="btnClear">Clear</button>
                  <textarea id="input" style="height: 85vh!important; width:100%;"></textarea>
               </div>
            </div>
         </div>

         <div class="w3-col s12 m6 l6" style="padding:0px 5px 30px 5px !important">
            <div class=" w3-card-4">
               <header class="w3-container w3-blue">
                  Send
               </header>

               <div class="w3-container w3-padding-12">
                  <!--<textarea name="comment"style="width:97%;min-height:200px; margin:1px !important"></textarea>-->
                  <input type="text" class="w3-input w3-border" id="send">
                  <textarea id="output" style="height: 80vh!important; width:100%;"></textarea>
               </div>
            </div>
         </div>


      </div>

   </div>
</div>
</div>

<br>

<div class="w3-bottom w3-hide-small">
   <ul class="w3-navbar w3-blue">
      <li><a href="#">&nbsp;</a></li>
   </ul>
</div>

<!--  ----------------------------------- >


</body>
</html>
